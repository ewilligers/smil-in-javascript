<!DOCTYPE html>
<html>
  <body>
    <script src="../../web-animations.js"></script>
    <script src="../../smil-in-javascript.js"></script>
    <script src="../harness.js"></script>
    <script src="timing-cycle-forwards-check.js"></script>

<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="600" height="400">

  <rect id="polyfillRect" x="0" y="0" width="100" height="100" fill="green" opacity="0.5">
    <animate id="polyfillWidth" attributeName="width" from="100" to="200" dur="5s" begin="0s;polyfillHeight.begin+1s"/>
    <animate id="polyfillHeight" attributeName="height" from="100" to="200" dur="2s" begin="polyfillWidth.begin+1s"/>
    <animate id="polyfillY" attributeName="y" from="0" to="100" dur="2s" begin="polyfillWidth.end-1s"/>
  </rect>

  <!-- Firefox has the following timing -->
  <rect id="polyfillClock" x="300" y="0" width="100" height="100" fill="green" opacity="0.5">
    <animate attributeName="width" from="100" to="200" dur="5s" begin="0s;polyfillClockHeight.begin+1s"/>
    <animate id="polyfillClockHeight" attributeName="height" from="100" to="200" dur="2s" begin="1s;polyfillClockHeight.end"/>
    <animate attributeName="y" from="0" to="100" dur="1s" begin="polyfillClockHeight.begin+1s"/>
  </rect>
  
  <rect id="nativeRect" x="0" y="0" width="100" height="100" fill="red" opacity="0.5">
    <nativeAnimate id="nativeWidth" attributeName="width" from="100" to="200" dur="5s" begin="0s;nativeHeight.begin+1s"/>
    <nativeAnimate id="nativeHeight" attributeName="height" from="100" to="200" dur="2s" begin="nativeWidth.begin+1s"/>
    <nativeAnimate id="nativeY" attributeName="y" from="0" to="100" dur="2s" begin="nativeWidth.end-1s"/>
  </rect>-->

  <!-- Chrome's native implementation has the following timing -->
  <rect id="nativeClock" x="300" y="0" width="100" height="100" fill="red" opacity="0.5">
    <nativeAnimate attributeName="width" from="100" to="200" dur="5s" begin="0s;nativeClockHeight.begin+1s"/>
    <nativeAnimate id="nativeClockHeight" attributeName="height" from="100" to="200" dur="2s" begin="1s;nativeClockHeight.end"/>
    <nativeAnimate id="nativeClockY" attributeName="y" from="0" to="100" dur="2s" begin="1s;nativeClockY.begin+3s;nativeClockY.begin+4s;nativeClockY.begin+5s"/>
  </rect>

</svg>

  </body>
</html>
